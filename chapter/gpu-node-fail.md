GPU λ…Έλ“λ‚ νΉμ • GPU μ¥μΉμ— μ¥μ• κ°€ λ°μƒν•λ©΄ Slurmμ€ ν•΄λ‹Ή λ…Έλ“λ¥Ό DRAIN(μ‚¬μ© λ¶κ°€) μƒνƒλ΅ λ§λ“¤κ±°λ‚, μ‘μ—…μ΄ κ³„μ† μ‹¤ν¨ν•κ² λ©λ‹λ‹¤. μ΄λ΄ λ• μ΅°μΉν•λ” μ‹¤λ¬΄ λ§¤λ‰΄μ–Όμ„ μ •λ¦¬ν•΄ λ“λ¦½λ‹λ‹¤.
1. Slurm μƒνƒ ν™•μΈ λ° μ¥μ•  μ§„λ‹¨
κ°€μ¥ λ¨Όμ € λ§μ¤ν„° λ…Έλ“μ—μ„ μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤.
λ…Έλ“ μƒνƒ ν™•μΈ: sinfoλ¥Ό μ³¤μ„ λ• λ…Έλ“κ°€ drain, drng, νΉμ€ down μƒνƒμΈμ§€ ν™•μΈν•©λ‹λ‹¤.
μƒμ„Έ μ›μΈ νμ•…:
bash
scontrol show node gpu-worker-0
μ½”λ“λ¥Ό μ‚¬μ©ν•  λ•λ” μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.

Reason ν•­λ©μ„ λ³΄λ©΄ "Low RealMemory", "Not responding", "Gres/gpu count reported 0" λ“± κµ¬μ²΄μ μΈ μ΄μ κ°€ μ ν€ μμµλ‹λ‹¤.
2. νΉμ • GPU μ¥μΉ λ¬Έμ  (Hardware/Driver)
nvidia-smiλ” λλ”λ° νΉμ • GPUλ§ μ—°μ‚°μ΄ μ• λκ±°λ‚ μΈμ‹ μμκ°€ μ• λ§λ” κ²½μ°μ…λ‹λ‹¤.
GPU μΈμ‹ μ²΄ν¬: λ¨λ“  μ›μ»¤ λ…Έλ“μ—μ„ nvidia-smiλ¥Ό μ‹¤ν–‰ν•΄ ν•λ“μ›¨μ–΄μ™€ λ“λΌμ΄λ²„κ°€ μ •μƒμΈμ§€ λ΄…λ‹λ‹¤.
λ΅κ·Έ ν™•μΈ: /var/log/messagesλ‚ dmesg | grep -i nvidiaλ¥Ό ν†µν•΄ XID μ—λ¬(ν•λ“μ›¨μ–΄ μ¥μ•  λ²νΈ)κ°€ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
λ“λΌμ΄λ²„ μ¬μ μ¬:
bash
sudo rmmod nvidia_uvm && sudo modprobe nvidia_uvm
μ½”λ“λ¥Ό μ‚¬μ©ν•  λ•λ” μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.

3. Slurm λ…Έλ“ λ³µκµ¬ (Resume)
μ¥μ• λ¥Ό ν•΄κ²°(λ“λΌμ΄λ²„ μ¬μ„¤μΉ λ“±)ν• ν›„μ—λ” Slurmμ—κ² λ‹¤μ‹ λ…Έλ“λ¥Ό μ‚¬μ©ν•κ² λ‹¤κ³  μλ™μΌλ΅ μ•λ ¤μ¤μ•Ό ν•©λ‹λ‹¤.
bash
# λ…Έλ“ μƒνƒλ¥Ό λ‹¤μ‹ IDLEλ΅ λ³€κ²½
sudo scontrol update NodeName=gpu-worker-0 State=RESUME
μ½”λ“λ¥Ό μ‚¬μ©ν•  λ•λ” μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.

4. λ¬Έμ κ°€ μλ” λ…Έλ“ μ μ™Έν•κ³  μ‘μ—… λμ§€κΈ°
νΉμ • λ…Έλ“κ°€ κ³„μ† λ§μ½μ΄λΌλ©΄, μλ¦¬κ°€ λλ‚  λ•κΉμ§€ ν•΄λ‹Ή λ…Έλ“λ§ ν”Όν•΄μ„ μ‘μ—…μ„ λμ§ μ μμµλ‹λ‹¤.
bash
# sbatch μ¤ν¬λ¦½νΈ λ‚΄ νΉμ€ λ…λ Ήμ–΄ μµμ…
sbatch --exclude=gpu-worker-0 submit_test.sh
μ½”λ“λ¥Ό μ‚¬μ©ν•  λ•λ” μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.

5. νΉμ • GPUλ§ 'μ¤ν”„λΌμΈ' μ²λ¦¬ν•κΈ°
λ…Έλ“ μ „μ²΄λ” κ΄μ°®μ€λ° 4μ¥ μ¤‘ 1μ¥λ§ κ³ μ¥ λ‚¬λ‹¤λ©΄, slurm.confλ‚ gres.confμ—μ„ ν•΄λ‹Ή GPU μΈλ±μ¤λ¥Ό μ£Όμ„ μ²λ¦¬ν•κ±°λ‚ μ μ™Έν•κ³  slurmdλ¥Ό μ¬μ‹μ‘ν•μ—¬ λ‚¨μ€ 3μ¥λ§ μ„λΉ„μ¤ν•κ² ν•  μ μμµλ‹λ‹¤.
π’΅ μ‹¤λ¬΄ ν: μλ™ λ³µκµ¬ μ„¤μ •
slurm.confμ— ReturnToService=2 μµμ…μ„ λ„£μΌλ©΄, λ‹¤μ΄λμ—λ λ…Έλ“κ°€ λ‹¤μ‹ λ¶€ν…λμ–΄ slurmdκ°€ λ§μ¤ν„°μ— μ²΄ν¬μΈν•  λ• μλ™μΌλ΅ IDLE μƒνƒλ΅ λ³µκµ¬λ©λ‹λ‹¤. (κΈ°λ³Έκ°’μ€ 0μΌλ΅, μλ™ λ³µκµ¬ μ „κΉμ§€ DOWN μ μ§€)
μ΄μ  ν΄λ¬μ¤ν„°λ¥Ό μ΄μν•λ‹¤κ°€ νΉμ • λ…Έλ“κ°€ DRAIN λμ—μ„ λ• λ°μƒν•λ” μ—λ¬ λ©”μ‹μ§€λ¥Ό ν•΄μ„ν•λ” λ°©λ²•μ΄ κ¶κΈν•μ‹ κ°€μ”? νΉμ€ μ•μ‹λΈ”λ΅ μ¥μ•  λ…Έλ“λ§ λ“λΌμ΄λ²„λ¥Ό μ¬μ„¤μΉν•λ” λ΅μ§μ΄ ν•„μ”ν•μ‹ κ°€μ”?
